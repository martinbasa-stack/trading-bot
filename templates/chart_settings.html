<html>
    <head>
        <title>Trading bot</title>
        {% include 'segments/_header.html' %}
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>
        
        
        <meta id="StrategySettingsData" data-json='{{ AllStrategySettings | tojson }}'>
        <meta id="strategy" data-json='{{ strategy | tojson }}'>
        <meta id="trades_json" data-json='{{ trades_json | tojson }}'>
        <meta id="candles_json" data-json='{{ candles_json | tojson }}'>
        <meta id="avgs" data-json='{{ avgs | tojson }}'>
        <meta id="price_indic" data-json='{{ price_indic | tojson }}'>
        <meta id="solo_indic" data-json='{{ solo_indic | tojson }}'>
    </head>
    <body>
        <div class="sidenav"> 
            <div class="nav_top">       
                <form action="/settings_chart" method="POST" >
                <select name="load_select" id="load_select">
                    {%for strategy in strategy_list %} 
                        
                        <option id="nav_{{strategy.idx}}" value="{{strategy.idx}}" >{{strategy.idx}} {{strategy.name}}</option>              
                        
                    {% endfor %}
                </select>                
                    <button type="submit">LOAD</button>
                </form>

                <button class=""  id="nav_Settings" value="Settings" type="button">Settings</button>
                <button class=""  id="nav_Charts" value="Charts" type="button">Charts</button>  
            </div>
            {% include 'segments/_nav_side.html' %}
        </div>
    <div class="wrapper">
        <header>
            <div>
             <b>TRADE CHART</b>
             </div>
        </header>
        <main>              
            <div class="center-column-div">
                
                <!---------------------------TITLE    ------------------------>
                {% if strategy.paperTrading %}
                <h2> 
                {%else%}
                <h2 class="headLive"> 
                {%endif%}   
                Strategy {{strategy.id}}: {{ strategy.name }} </h2>
                <h2>{{strategy.type}}</h2>
                <!---------------------------Settings tables    ------------------------>                
                <section id="Settings"></section>   
                <h2>Settings</h2>                    
                        
                    <form action="/strategy_save" method="POST" onsubmit="return confirm('Confirm action');">
                        <div class="center-div" id="div_{{strategy.id}}">   
                            <input type="hidden" name="location" value="chart">

                            {% if strategy.paperTrading %}                        
                            <input class="titleLong" 
                            {%else%}
                                <input class="titleLongGreen" 
                            {%endif%}
                            type="text" name="name" value= "{{ strategy.name  }}"> 
                        
                            {% include 'segments/_settings_gen_table.html' %}
                            
                            {% include 'segments/_settings_ind_table.html' %}
                        </div>
                    </form>
                    
                <!---------------------------CHARTS    ------------------------>
                <section id="Charts"></section>
                <div id= "charts_div" class="chart-wrapper">
                </div>


            </div>
        </main>
        <footer>
            {% include 'segments/_footer.html' %}    
        </footer>
    </div>
    <script src="{{ url_for('static', filename='js/scroll.js') }}"></script>
        
    <script type="module" src="{{ url_for('static', filename='js/chart_generate.js') }}"></script>
    <script src="{{ url_for('static', filename='js/settings_table.js') }}"></script>    
    <script type="module" src="{{ url_for('static', filename='js/strategy_settings_one.js') }}"></script>
    </body>
</html>